/*! Spice 2014-03-06 */
!function(a,b){"use strict";function c(){throw"abstract method"}function d(a){return a}function e(){}function f(a,b){this.data=a,this.index=b}function g(){}function h(a,b){this._el=a,this._context=b,this._init()}function i(a,b){this._streams=a,this._context=b,this._init()}function j(a,b){this._event=a.onValue(e),this._context=b,this._init()}function k(a,b,c){this._trues=b.filter(d).map(a),this._falses=b.not().filter(d).map(a),this._event=this._trues,this._context=c,this._init()}f.prototype.eval=function(a){a(this.data,this.index)},g.prototype._init=function(){function a(a){return function(){var b=[].slice.call(arguments),c=[this._context.data,this._context.index];return a.apply(this,c.concat(b)).parent(this)}}function b(a){return function(){var b=this,c=[].slice.call(arguments);return this.call(function(){var d=[b._context.data,b._context.index];a.apply(this,d.concat(c))}),this}}if(l){for(var c in l.tags)l.tags.hasOwnProperty(c)&&l.tags[c]&&(this[c]=a(l.tags[c]));for(c in l.modifiers)l.modifiers.hasOwnProperty(c)&&l.modifiers[c]&&(this[c]=b(l.modifiers[c]))}},g.prototype.each=function(a){return new j(this.eval(a).map(function(a){return new i(a.map(function(a,b){var c=new f(a,b),d=void 0;return new h(d,c)}),this._context)}),this._context)},g.prototype.$if=function(a){return new k(this,this.eval(a),this._context)},g.prototype._if=g.prototype.$if,g.prototype.$else=void 0,g.prototype.data=function(a){return this._context.data=a,this},g.prototype.index=function(a){return this._context.index=a,this},g.prototype.eval=function(a){return"function"==typeof a?this.eval(this._context.eval(a)):a instanceof b.Observable?a:b.once(a)},g.prototype.call=c,g.prototype.append=c,g.prototype.open=c,g.prototype.parent=function(a){return this._parent=a,this},g.prototype.bindClose=g.prototype.parent,g.prototype.close=function(){return this._parent},h.prototype=new g,h.prototype.call=function(a){a.call(this._el)},h.prototype.open=function(a){return this.append(a),new h(a,this._context).parent(this)},h.prototype.append=function(b){return a(this._el).append(b),this},i.prototype=new g,i.prototype.call=function(a){return this._streams.forEach(function(b){b.call(a)}),this},i.prototype.open=function(b){var c=this;return new i(this._streams.map(function(d){var e=a(b).clone()[0];return d.open(e).parent(c)}),this._context).parent(this)},i.prototype.append=function(a){return this._streams.forEach(function(b){b.append(a)}),this},j.prototype=new g,j.prototype.each=function(a){return new j(this._event.map(function(b){return b.each(a)})).parent(this)},j.prototype.$if=function(a){return new j(this._event.map(function(b){return b.$if(a)}),this._context).parent(this)},j.prototype._if=j.prototype.$if,j.prototype.call=function(a){return this._event.onValue(function(b){b.call(a)}),this},j.prototype.open=function(a){return new j(this._event.map(function(b){return b.open(a)}),this._context).parent(this)},j.prototype.append=function(a){return this._event.onValue(function(b){b.append(a)}),this},k.prototype=new j(b.never()),k.prototype.$else=function(){return new j(this._falses,this._context)},k.prototype._else=k.prototype.$else;var l=function(a){return new h(a,new f)};l.select=function(){},l.modifiers={},l.tags={},window.$spice=l}(window.jQuery,window.Bacon);