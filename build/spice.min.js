/*! spice 2013-09-19 */
window.$spice=function(a){function b(a,b){function c(c){return function(){var d=[].slice.call(arguments),e=[a,b.data(),b.index()];return $spice.fn[c].apply(a,e.concat(d))}}for(var d in $spice.fn)$spice.fn.hasOwnProperty(d)&&$spice.fn[d]&&(a[d]=c(d))}var c=function(c){var i={};return i.data=function(a){return arguments.length?(c.data(a),i):c.data()},i.eval=function(a){return"function"==typeof a?a.call(i,c.data(),c.index()):a},i.call=function(a){return a.call(c.result(),c.data(),c.index()),i},i.append=function(a){return c.push(a),i},i.open=function(a){var b=f(a,c.data(),c.index()),d=g(b);return i.append(a),d.bindClose(i)},i.each=function(b){var j,k;return b=i.eval(b),j=b.map(function(b,h){var i=c.result();return a.isArray(i)?e(d(i,b,h)):g(f(i,b,h))}),k=h(j,c),k.bindClose(i)},i._if=function(a){var b=k(i.eval(a),i,c);return b.bindClose(i)},b(i,c),i},d=function(a,b,c){var d={};return a=a||[],d.data=function(a){return arguments.length?(b=a,d):b},d.index=function(){return c},d.push=function(b){a.push(b)},d.result=function(){return a},d.methods={},d},e=function(a){var b=c(a);return b.close=function(){return a.result()},b},f=function(b,c,d){var e={},f=[],g=a(b);return e.data=function(a){return arguments.length?(c=a,e):c},e.index=function(){return d},e.push=function(a){f.push(a),g.append(a)},e.result=function(){return b},e.methods={text:function(a){g.append(a)},attr:function(a,b){g.attr(a,b)},attrs:function(a){g.attr(a)},classed:function(a){for(var b in a)a.hasOwnProperty(b)&&a[b]&&g.addClass(b)}},e},g=function(a){var b,d=c(a);return d.bindClose=function(a){return b=a,d},d.close=function(){return b},d.text=function(b){return b=d.eval(b),a.methods.text(b),d},d.attr=function(b,c){return c=d.eval(c),a.methods.attr(b,c),d},d.attrs=function(b){return b=d.eval(b),a.methods.attrs(b),d},d.classed=function(b){return b=d.eval(b),a.methods.classed(b),d},d},h=function(c,d){function e(a){return function(){var b=arguments;return c.forEach(function(c){c[a].apply(c,b)}),j}}function g(a){return function(){var b=arguments,e=c.map(function(c){return c[a].apply(c,b)}),f=h(e,d);return f.bindClose(j)}}var i,j={};j.open=function(b){var e=c.map(function(c){var d=a(b).clone()[0];return c.open(d)}),g=f(b,d.data(),d.index()),i=h(e,g);return i.bindClose(j)},j.bindClose=function(a){return i=a,j},j.close=function(){return i};var k=["each","_if"];k.forEach(function(a){j[a]=g(a)});var l=["call","append"];l.forEach(function(a){j[a]=e(a)});for(var m in d.methods)d.methods.hasOwnProperty(m)&&(j[m]=e(m));return b(j,d),j},i=function(a){return h([],a)},j=function(a,b){var c,d={},e=["each","open","append"];e.forEach(function(b){d[b]=function(){var c=a[b].apply(a,arguments);return c.bindClose(d)}});var f=["data","call"];return f.forEach(function(b){d[b]=function(){return a[b].apply(a,arguments),d}}),d.bindClose=function(a){return c=a,d},d.close=function(){return c},d.eval=function(){return a.eval.apply(a,arguments)},d._if=function(a){var c=k(d.eval(a),d,b);return c.bindClose(d)},d},k=function(a,c,d){var e=a?j(c,d):i(d),f=a?i(d):j(c,d);return b(e,d),b(f,d),e._else=function(){return f.bindClose(c)},e.bindClose(c)};return $spice=function(a){return a?e(f(a)):e(d())},$spice.select=function(b){var c=a(b)[0];return e(f(c))},$spice.fn={},$spice}(window.$);